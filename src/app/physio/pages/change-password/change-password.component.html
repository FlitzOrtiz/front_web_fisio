<app-user-header></app-user-header>
<div class="account-wrapper">
  <app-configuration-menu></app-configuration-menu>

  <div class="account-container">
    <div class="account-header">
      <h2>Cambiar contraseña</h2>
    </div>

    <div class="account-form">
      <div class="form-section">
        <label for="currentPassword">Contraseña actual</label>
        <div class="input-group">
          <input
            id="currentPassword"
            [type]="showCurrentPassword ? 'text' : 'password'"
            [(ngModel)]="currentPassword"
            placeholder="Ingresa tu contraseña actual"
          />
          <button
            type="button"
            (click)="togglePasswordVisibility('current')"
            class="toggle-button"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/709/709612.png"
              alt="toggle"
              width="20"
            />
          </button>
        </div>

        <label for="newPassword">Nueva contraseña</label>
        <div class="input-group">
          <input
            id="newPassword"
            [type]="showNewPassword ? 'text' : 'password'"
            [(ngModel)]="newPassword"
            (input)="onPasswordChange()"
            placeholder="Mínimo 8 caracteres"
          />
          <button
            type="button"
            (click)="togglePasswordVisibility('new')"
            class="toggle-button"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/709/709612.png"
              alt="toggle"
              width="20"
            />
          </button>
        </div>

        <label for="confirmPassword">Confirmar nueva contraseña</label>
        <div class="input-group">
          <input
            id="confirmPassword"
            [type]="showConfirmPassword ? 'text' : 'password'"
            [(ngModel)]="confirmPassword"
            (input)="onPasswordChange()"
            placeholder="Repite tu nueva contraseña"
          />
          <button
            type="button"
            (click)="togglePasswordVisibility('confirm')"
            class="toggle-button"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/709/709612.png"
              alt="toggle"
              width="20"
            />
          </button>
        </div>
      </div>

      <div class="password-rules">
        <ul>
          <li *ngFor="let rule of passwordRules">
            <span
              class="circle"
              [class.valid]="rule.valid"
              [class.invalid]="!rule.valid"
            ></span>
            {{ rule.text }}
          </li>
        </ul>
      </div>
    </div>

    <fbutton
      [label]="'Guardar nueva contraseña'"
      [color]="'primary'"
      [type]="'button'"
      [size]="'lg'"
      [routeTo]="'/account'"
      class="start-button"
    ></fbutton>
  </div>
</div>
